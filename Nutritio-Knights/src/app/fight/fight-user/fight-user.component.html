
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fight Arena</title>
    @import url('https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap');
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
</head>
<body>
    <nav-bar></nav-bar>

    <section id="banner" class="py-5">
        <div class="container">
           <h4 class="header" >Welcome to Fight Arena</h4>
        </div>
    </section>


    <div class="container">

    <section class="dashboard">
        <div class="dash-content">
            <div  *ngIf="hasCurrentFight===false" class="overview">
                <div class="title">
                    <h3>No Current Fight Available</h3>
                </div>
                <div><button type="button" (click)="newFight()">Create New Battle</button>
                </div>
            </div>

            <div *ngIf="userNewFight===true" class="monster-details">
                <h3>Select a Monster</h3>
                <table *ngIf="selectedMonster===''" class="content-table">
                    <thead>
                        <tr>
                            <th>Monster Name</th>
                            <th>Monster HP</th>
                            <th>XP given</th>
                            <th>Attack Power</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- ngFor is a structural directive that loops through an array and takes actions  i.e. for(Restaurant resto : restaurants)-->
                        <tr *ngFor="let monster of monsterList" (click) = "assignMonster(monster.id, monster.monster_name)">
                            <!-- Interpolation: readonly -->
                            <td>{{monster.monster_name}}</td>
                            <td>{{monster.monster_max_hp}}</td>
                            <td>{{monster.xp_given}}</td>
                            <td>{{monster.attackPower}}</td>
                    </tbody>
                </table>
                <h4 *ngIf="selectedMonster!==''"> {{selectedMonsterName}}</h4>

                <button class="change" *ngIf="selectedMonster!==''" type="button" (click)="changeMonster()">Change Monster</button>
                <button class = "confirm" type="button" (click)="confirmNewFight()">Confirm</button>
                <button class="cancel" type="button" (click)="cancelNewFight()">Cancel Fight Request</button>
            </div>
            </div>

            
    </section>

<div *ngIf="hasCurrentFight===true" class="container">
    <h3>{{username}} current fight:</h3>
    <table class="content-table">
        <thead>
            <tr>
            <th>Attribute</th>
            <th>User Info</th>
            <th>Monster Info</th>
        </tr>
        </thead>
        <tbody>
            <!-- ngFor is a structural directive that loops through an array and takes actions  i.e. for(Restaurant resto : restaurants)-->
            <tr>
                <td>Name</td>
                <td>{{username}}</td>
                <td>{{(currentFight.monster_id| keyvalue)[3].value}}</td>
            </tr>

            <tr>
                <td>Health</td>
                <td>{{currentFight.fight_avatar_hp}}</td>
                <td>{{currentFight.fight_monster_hp}}</td>
            </tr>

            <tr>
                <td>Current Hits</td>
                <td>{{(currentFight.username| keyvalue)[0].value}}</td>
                <td>{{currentFight.monster_hits}}</td>
            </tr>

            

            
                <!-- Interpolation: readonly -->
                <!-- <td>{{(fight.monster_id | keyvalue)[3].value}}</td>
                <td *ngIf="fight.fight_monster_hp===0">{{username}}</td>
                <td *ngIf="fight.fight_monster_hp!==0">{{(fight.monster_id | keyvalue)[3].value}}</td> -->

        </tbody>
    </table>
    <button type="button" (click)="progressFight()">Progress Fight</button>

    <br>

</div>

    <br>

   

<div class="container">
    <h3>{{username}} fight history:</h3> 
    <table class="table table-hover">
        <thead>
            <tr>
            <th>Monster Name</th>
            <th>Who Won</th>
        </tr>
            
        </thead>
        <tbody>
            <!-- ngFor is a structural directive that loops through an array and takes actions  i.e. for(Restaurant resto : restaurants)-->
            <tr *ngFor="let fight of fightHistory">
                <!-- Interpolation: readonly -->
                <td>{{(fight.monster_id | keyvalue)[3].value}}</td>
                <td *ngIf="fight.fight_monster_hp===0">Vanquished</td>
                <td *ngIf="fight.fight_monster_hp!==0">Lost</td>
            </tr>

        </tbody>
    </table>

    <br>

</div>
</div>

</body>
</html>
